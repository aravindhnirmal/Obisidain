[[Keep/Colour/DEFAULT]] [[Keep/Archived]] 

%{
[[include]] <stdio.h>
%}

%token NAME NUMBER FOR IF THEN LPAREN RPAREN ASSIGN LESS GREATER PLUS LBRACE RBRACE SEMICOLON

%%

program: statement
       | program statement

statement: expression SEMICOLON
         | FOR LPAREN ASSIGN NAME ASSIGN NUMBER SEMICOLON expression SEMICOLON expression PLUS PLUS RPAREN LBRACE IF LPAREN NAME GREATER NAME RPAREN THEN NAME ASSIGN NAME PLUS PLUS SEMICOLON RBRACE

expression: NUMBER
          | NAME
          | expression PLUS expression
          | LPAREN expression RPAREN
          | expression LESS expression

%%

int main() {
    yyparse();
    return 0;
}

void yyerror(char *s) {
    printf("Syntax Error: %s\n", s);
}

int i = 0, j = 10, a = 5, c = 0;

int eval(int x, char op, int y) {
    switch (op) {
        case '+': return x + y;
        case '-': return x - y;
        case '*': return x * y;
        case '/': return x / y;
        default: printf("Invalid operator: %c\n", op); return 0;
    }
}

int execute_statement() {
    if (i > j) c = a++;
    return c;
}

int execute_for() {
    for (i = 0; i < 20; i++) {
        if (i > j) c = a++;
    }
    return c;
}

int execute_program() {
    int c = 0;
    for (i = 0; i < 20; i++) {
        if (i > j) c = a++;
    }
    return c;
}

int yylex() {
    int token = yylex();
    if (token == LESS || token == PLUS || token == GREATER) {
        yylval.op = yytext[0];
        return OPERATOR;
    }
    return token;
}

